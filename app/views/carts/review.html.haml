
%div.mx-auto.px-4.mt-20.bg-gray-100.w-full.h-screen.container.max-w-screen-lg
  .flex.pt-4
    = render 'indicator', {step: 4}
    .flex-grow.bg-white.ml-4.rounded
      %div.p-4.text-green-500.text-2xl.bold Order Status
      %div.m-4.p-4 
        %ol.relative.border-s.border-gray-200
          %li.mb-10.ms-4
            .absolute.w-3.h-3.rounded-full.border.border-white{:class => "mt-1.5 -start-1.5 #{@payment.captured? ? "bg-green-500" : "bg-gray-500"}"}
            %time.mb-1.text-sm.font-normal.leading-none.text-gray-400 Payment Status
            %h3.text-lg.font-semibold.text-gray-900 Complete
            -# %p.mb-4.text-base.font-normal.text-gray-500 Complete
            
          %li.mb-10.ms-4
            .absolute.w-3.h-3.bg-gray-200.rounded-full.border.border-white{:class => "mt-1.5 -start-1.5 #{@order&.initiate? ? "bg-green-500" : "bg-gray-500"}"}
            %time.mb-1.text-sm.font-normal.leading-none.text-gray-400 Order Status
            %h3.text-lg.font-semibold.text-gray-900= @order&.initiate? ? "Order Placed" : ""
            %p.text-base.font-normal.text-gray-500 Expected delivery at: #{7.days.from_now.strftime("%d-%m-%Y")}
:javascript
  var captured = "#{@payment.captured? ? true : false}"
  if(captured == "false"){
    setTimeout(function(){
      window.location.reload()
    }, 2000)
  }else{
    var cart = localStorage.getItem('cart')
    localStorage.removeItem('cart')
    if(cart) window.location.reload();
  }
